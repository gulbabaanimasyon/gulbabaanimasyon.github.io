<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image.prod.js"></script>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>


<script>

 document.addEventListener("DOMContentLoaded", function() {

// detect target found
var exampleTarget = document.querySelector('#VideoPlane');
exampleTarget.addEventListener("targetFound", event => {
	console.log("target found");
	var vid = document.querySelector("#vid");
	vid.currentTime = 0;   
	vid .play();
	var audioPlayer = document.getElementById("vidAudio");
	audioPlayer .currentTime = 0;   
	audioPlayer.play();
});

// detect target lost
exampleTarget.addEventListener("targetLost", event => {
	console.log("target lost");
	document.querySelector("#vid").pause();
	document.getElementById("vidAudio").pause();
});

});

</script>

    <style>
      body {
        margin: 0;
      }
      .example-container {
        overflow: hidden;
        position: absolute;
        width: 100%;
        height: 100%;
      }
    </style>


	<meta name="apple-mobile-web-app-capable" content="yes">
</head>

<body style="margin: 0; overflow: hidden;">

//Version test text
//<div style="position: absolute; z-index: 1000"><center><h1 style="color:red;"> Version 5.7</h1></center></div>

<audio id="vidAudio" src="assets/AssetAudio.mp3" preload="auto"></audio>

    <a-scene mindar-image="filterMinCF:0.0001; filterBeta: 0.005; missTolerance: 1; imageTargetSrc: ./targets.mind;" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false" embedded gesture-detector>
	 <a-assets>
                <video
                    id="vid"
                    type="video/mp4"
                    src="assets/asset.mp4"
                    preload="auto"
                    response-type="arraybuffer"
                    loop="true"
                    crossorigin
                    webkit-playsinline
                    autoplay
                    muted
                    playsinline
                ></video>
            </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
      <a-entity id="VideoPlane" mindar-image-target="targetIndex: 0" >
	<a-video height="1.43" width="1" position="0 0 0" rotation="0 0 0" autoplay loop="true" type="assets/asset.mp4" preload="auto" src="#vid" class="clickable" gesture-handler>
      </a-entity>
    </a-scene>


  </body>
</html>